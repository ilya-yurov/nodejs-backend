# Берем за основу уже существующий образ ОС, который скачиваем из докерхаба
# node:16-alpine, основанный на Alpine Linux и содержащий Node.js версии 16.
FROM node:16-alpine
# Эта строка устанавливает рабочий каталог внутри контейнера, где будут выполняться все последующие команды.
#В данном случае, рабочий каталог установлен в /usr/src/app
WORKDIR /usr/src/app
# Эта строка копирует файлы package.json и package-lock.json из текущего контекста сборки
# (обычно это каталог, в котором находится Dockerfile) в рабочий каталог контейнера (/usr/src/app).
COPY package*.json ./
# Командой RUN выполняются команды ПРИ СБОРКЕ ОБРАЗА
# внутри контейнера, например установка зависимостей как в этом случае
RUN npm install
# Эта строка копирует все остальные файлы из текущего контекста сборки в рабочий каталог контейнера.
# Это может включать в себя исходный код приложения, конфигурационные файлы и так далее
COPY . .
COPY ./dist ./dist
#открываем порт, по которому мы можем подключиться к нашему приложению
EXPOSE 3000
# а вот эта команда выполняется при запуске самого контейнера
CMD ["npm", "run", "start:dev"]
